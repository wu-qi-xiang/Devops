# Linux系统调优基础

## 调优概述
调优是对系统或特定的程序做配置调整，以获得更大的吞吐量或者是更快的响应时间。

### 调优步骤
1. 通过监控收集数据
2. 建立信息模型
3. 对数据进行分析，确定系统现在存在的瓶颈
4. 制定调优步骤和计划
5. 实施调优方案

## 性能分析工具

### Strace工具
Strace可以分析程序每个步骤的执行时间。
使用方法请查看：`man strace`

## 性能基础概念

### 网络性能指标
- **带宽**：在恒定时间内通过的固定单位的数据总量
- **吞吐量**：在给定时间内通过的有用的数据量
- **开销**：传输有用数据时产生的开销

## 系统性能指标

### CPU指标
- 主频
- 一二三级缓存
- CPU核心数

### 内存
- DDR4：速度快，耗能低

### 存储
- 硬盘转速（RPM）越大越好
- 硬盘缓存
- 接口
- 传输速度

### 网络
- 全双工
- 接口

## 系统调优方案

### 磁盘调优
- I/O读写优化
- 提高缓冲器效率
- 优化预队列的长度
- 预读数据量的大小
- I/O的调度算法

### 网络调优
调节sysconf的socket，tcp，udp的buffer大小

计算公式：
```
buffer = 带宽 * 到达时间（ping的时间）
```

## Linux系统调优工具：tuned

### 安装
```bash
yum install tuned -y
```

### 基础命令
```bash
# 列出所有的默认的调优策略
tuned-adm list

# 查看现在生效的调优策略
tuned-adm active

# 查看tuned目前推荐使用的策略
tuned-adm recommend

# 修改调优方案，使用新的调优策略
tuned-adm profile 方案名称

# 关闭调优策略
tuned-adm off
```
                                                                                                             
# HTTP基础知识

## 基本概念

### 访问统计指标
- **IP**：访问的外网IP
- **PV**：访问的一个页面为一个PV
- **UV**：一个电脑访问一个网站即为一个UV

### HTTP事务流程
一次HTTP操作称为一个事务，其工作过程可分为四步：

1. 首先客户机与服务器需要建立连接。只要单击某个超级链接，HTTP的工作开始。
2. 建立连接后，客户机发送一个请求给服务器，请求方式的格式为：统一资源标识符（URL）、协议版本号，后边是MIME信息包括请求修饰符、客户机信息和可能的内容。
3. 服务器接到请求后，给予相应的响应信息，其格式为一个状态行，包括信息的协议版本号、一个成功或错误的代码，后边是MIME信息包括服务器信息、实体信息和可能的内容。
4. 客户端接收服务器所返回的信息通过浏览器显示在用户的显示屏上，然后客户机与服务器断开连接。

> 注：如果在以上过程中的某一步出现错误，那么产生错误的信息将返回到客户端，由显示屏输出。对于用户来说，这些过程是由HTTP自己完成的，用户只要用鼠标点击，等待信息显示就可以了。

## HTTP协议特性

HTTP协议主要用于应用层的数据交互。当客户端打开任意的一个端口向web服务端的指定端口（如80）发起HTTP请求时：

1. 首先会发起TCP的三次握手，建立可靠的数据连接通道
2. 然后进行HTTP的数据交换
3. 当客户端的数据接收完毕之后会断开TCP连接

HTTP连接也称为**无状态连接**，这意味着客户端每次向服务器发起HTTP请求时，每次请求都会建立一个新的HTTP连接，而不是在一个HTTP请求上完成所有的数据交换。

## 资源定位标识符

### URI、URL和URN
- **URI**（统一资源标识符）：用来唯一标识一个资源
- **URL**（统一资源定位符）：一种具体的URI，可以访问和获取资源
- **URN**（统一资源命名）：通过名字来标识资源

### URL格式
完整的URL标识格式为：
```
protocol://host[:port]/path/.../[?query-string][#anchor]
```

参数详解：
- **protocol**：基于某种协议，常见的协议有HTTP、HTTPS、FTP、RSYNC
- **host**：服务器IP地址或者域名
- **port**：服务器的端口号
- **path**：访问资源在服务器的路径
- **query-string**：传递给服务器的参数及字符串
- **anchor**：锚定结束

## HTTP请求方法

1. **GET**：向特定的资源发出请求，获取服务器端的数据
2. **POST**：向web服务器提交数据进行处理请求，指提交新的数据
3. **PUT**：向web服务器提交上传最新的内容，指更新数据
4. **DELETE**：请求删除request-URL所标识的服务器资源
5. **TRACE**：回显服务器收到的请求，主要用于测试或诊断
6. **CONNECT**：HTTP/1.1协议中预留给能够将连接改为管道方式的代理服务器
7. **OPTIONS**：返回服务器针对特定资源所支持的HTTP请求方法
8. **HEAD**：与GET相同，不会返回消息体

## HTTP状态码

| 状态码类别 | 说明 |
|------------|------|
| 1xx | 指示信息--表示请求已接收，继续处理 |
| 2xx | 成功--表示请求已被成功接收、理解、接受 |
| 3xx | 重定向--要完成请求必须进行更进一步的操作 |
| 4xx | 客户端错误--请求有语法错误或请求无法实现 |
| 5xx | 服务器端错误--服务器未能实现合法的请求 |

### 常见状态码
- **200 OK**：客户端请求成功
- **400 Bad Request**：客户端请求有语法错误，不能被服务器所理解
- **401 Unauthorized**：请求未经授权，这个状态代码必须和WWW-Authenticate报头域一起使用
- **403 Forbidden**：服务器收到请求，但是拒绝提供服务
- **404 Not Found**：请求资源不存在，例如：输入了错误的URL
- **500 Internal Server Error**：服务器发生不可预期的错误
- **503 Server Unavailable**：服务器当前不能处理客户端的请求，一段时间后可能恢复正常

## HTTP版本差异

### HTTP/1.0 vs HTTP/1.1
- **HTTP/1.0**：每次连接只处理一个请求和响应
- **HTTP/1.1**：一个TCP连接可以传送多个HTTP请求和响应
